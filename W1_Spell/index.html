<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Spelling Flashcards</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 800px;
    }
    h1 {
      margin-bottom: 10px;
    }

    table {
      width: 100%;
      table-layout: fixed;
    }
    td {
      vertical-align: top;
      padding: 20px;
      border: 1px solid #ccc;
    }
    /* Left flashcard area */
    #flashcardArea {
      font-size: 2em; /* big letters */
      text-align: center;
      min-height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    /* Right input area */
    #inputArea {
      text-align: center;
      vertical-align: middle;
    }
    #spellingInput {
      font-size: 1.2em;
      padding: 8px;
      width: 80%;
      box-sizing: border-box;
    }
    .red-border {
      border: 2px solid #f00 !important;
      background-color: #f9c3c3 !important;
    }

    /* Buttons (mimicking H5P style) */
    .btn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 25px; /* Rounded corners */
      border: none;
      cursor: pointer;
    }
    #nextButton {
      background-color: #007bff;  /* Blue */
      color: #fff;
    }
    #resetButton {
      background-color: #ccc;     /* Grey */
      color: #333;
      margin-left: 10px;
    }

    /* Center the buttons side by side */
    #buttonRow {
      margin-top: 20px;
      text-align: center;
    }
  </style>
</head>
<body>

<h1>Spelling Practice</h1>
<p><em>Look at the flashcard on the left, then type the word on the right.<br>
If correct, you move on. If incorrect, you’ll see red and get to retry.</em></p>

<table>
  <tr>
    <!-- Left: Flashcard area (big word) -->
    <td id="flashcardArea"></td>
    <!-- Right: Input area (where user spells the word) -->
    <td id="inputArea"></td>
  </tr>
</table>

<div id="buttonRow">
  <button id="nextButton" class="btn">Next</button>
  <button id="resetButton" class="btn">Restart</button>
</div>

<script>
/* 
  WORD LIST
*/
const words = [
  "autobiography",
  "biography",
  "self",
  "paragraph",
  "sentence",
  "written",
  "oral",
  "language",
  "English",
  "comprehension"
];

/* 
  STATES:
  - currentIndex: which word in the list we are on
  - mode: "flashcard" or "input"
  - if user is incorrect, we highlight in red and 
    the next press sends them back to "flashcard" for the SAME word
*/
let currentIndex = 0;
let mode = "flashcard"; 
let justGotItWrong = false; // to track if last attempt was incorrect

// DOM references
const flashcardArea = document.getElementById("flashcardArea");
const inputArea = document.getElementById("inputArea");
const nextButton = document.getElementById("nextButton");
const resetButton = document.getElementById("resetButton");

nextButton.addEventListener("click", onNextClick);
resetButton.addEventListener("click", onReset);

init();

function init() {
  // Show the first word as a flashcard
  showFlashcard();
}

/* 
  "Next" button behavior depends on the current mode & correctness
*/
function onNextClick() {
  if (mode === "flashcard") {
    // Move from flashcard to input mode
    mode = "input";
    showInput();
  } else {
    // mode === "input"
    checkSpelling();
  }
}

/* 
  Display the current word in the left "flashcardArea",
  clear the right "inputArea".
*/
function showFlashcard() {
  // Clear input area
  inputArea.innerHTML = "";
  // Show the word in large text
  flashcardArea.textContent = words[currentIndex];
  // Reset the "justGotItWrong" since they're seeing the correct word again
  justGotItWrong = false;
}

/* 
  Hide the flashcard word, show an input field to type the spelling
*/
function showInput() {
  // Clear the flashcard area
  flashcardArea.textContent = "";
  // Create an input element
  inputArea.innerHTML = ""; // clear
  const input = document.createElement("input");
  input.type = "text";
  input.id = "spellingInput";
  input.placeholder = "Type the word here...";
  input.autofocus = true;
  inputArea.appendChild(input);

  // Focus on the input
  input.focus();
}

/* 
  Check the user’s spelling in #spellingInput
  - If correct, go to next word
  - If incorrect, mark input red & next click => back to flashcard of same word
*/
function checkSpelling() {
  const userInput = document.getElementById("spellingInput");
  if (!userInput) return;

  const attempt = userInput.value.trim();
  const correct = words[currentIndex];

  // Clear previous red highlight
  userInput.classList.remove("red-border");

  // Compare (case-insensitive or case-sensitive?)
  // We'll do case-insensitive for this example. 
  if (attempt.toLowerCase() === correct.toLowerCase()) {
    // Correct
    currentIndex++;
    if (currentIndex >= words.length) {
      // Done, show a completion message
      flashcardArea.textContent = "All Done!";
      inputArea.innerHTML = "<p>Great job!</p>";
      mode = "done";
      nextButton.disabled = true;
    } else {
      // Move to next word's flashcard
      mode = "flashcard";
      showFlashcard();
    }
  } else {
    // Incorrect
    userInput.classList.add("red-border");
    justGotItWrong = true;
    // Next click will take them back to flashcard
    mode = "flashcard";
  }
}

/* 
  Reset the activity back to word #0 in flashcard mode
*/
function onReset() {
  currentIndex = 0;
  mode = "flashcard";
  justGotItWrong = false;
  nextButton.disabled = false;
  showFlashcard();
}
</script>

</body>
</html>
