<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Spelling Flashcards</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 800px;
    }
    h1 {
      margin-bottom: 10px;
    }

    table {
      width: 100%;
      table-layout: fixed;
      border-collapse: collapse;
    }
    td {
      vertical-align: top;
      padding: 20px;
      border: 1px solid #ccc;
    }

    /* Flashcard area on the left */
    #flashcardArea {
      text-align: center;
    }
    /* The “card” rectangle with rounded edges */
    #flashcardCard {
      background-color: #eef6ff; /* Light blue background */
      border: 1px solid #77c0ff; 
      border-radius: 10px;       /* Slightly rounded edges */
      padding: 30px;
      min-height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;            /* Big letters */
      color: #000;              /* Black text */
    }

    /* Input area on the right */
    #inputArea {
      text-align: center;
    }
    #spellingInput {
      font-size: 1.2em;
      padding: 8px;
      width: 80%;
      box-sizing: border-box;
    }
    .red-border {
      border: 2px solid #f00 !important;
      background-color: #f9c3c3 !important;
    }

    /* Buttons (mimicking H5P style) */
    .btn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 25px; /* Rounded corners */
      border: none;
      cursor: pointer;
    }
    #nextButton {
      background-color: #007bff;  /* Blue */
      color: #fff;
    }
    #resetButton {
      background-color: #ccc;     /* Grey */
      color: #333;
      margin-left: 10px;
    }

    /* Center the buttons side by side */
    #buttonRow {
      margin-top: 20px;
      text-align: center;
    }
  </style>
</head>
<body>

<h1>Spelling Practice</h1>
<p>
  <em>
    1) Look at the flashcard on the left <br>
    2) Click “Next” to type the word on the right <br>
    3) If incorrect, you’ll see it again before retrying.
  </em>
</p>

<table>
  <tr>
    <!-- Left: Flashcard area -->
    <td id="flashcardArea">
      <div id="flashcardCard"></div>
    </td>
    <!-- Right: Input area -->
    <td id="inputArea"></td>
  </tr>
</table>

<div id="buttonRow">
  <button id="nextButton" class="btn">Next</button>
  <button id="resetButton" class="btn">Restart</button>
</div>

<script>
/* 
  WORD LIST
*/
const words = [
  "autobiography",
  "biography",
  "self",
  "paragraph",
  "sentence",
  "written",
  "oral",
  "language",
  "English",
  "comprehension"
];

/* 
  STATE:
  - currentIndex: which word in the list we are on
  - mode: "flashcard" or "input"
  - If user is incorrect, we show the flashcard again immediately so they can see the correct spelling 
*/
let currentIndex = 0;
let mode = "flashcard"; 

// DOM references
const flashcardCard = document.getElementById("flashcardCard");
const inputArea = document.getElementById("inputArea");
const nextButton = document.getElementById("nextButton");
const resetButton = document.getElementById("resetButton");

// Event listeners
nextButton.addEventListener("click", onNextClick);
resetButton.addEventListener("click", onReset);

// Initialize with the first flashcard
showFlashcard();

function onNextClick() {
  if (mode === "flashcard") {
    // Move to input mode
    mode = "input";
    showInput();
  } else {
    // mode = "input"
    checkSpelling();
  }
}

// Show the current word in the flashcard
function showFlashcard() {
  flashcardCard.textContent = words[currentIndex];
  inputArea.innerHTML = ""; // Clear input on the right
}

// Hide the word, show a text box
function showInput() {
  flashcardCard.textContent = ""; // Hide the flashcard
  inputArea.innerHTML = "";

  const input = document.createElement("input");
  input.type = "text";
  input.id = "spellingInput";
  input.placeholder = "Type the word here...";
  input.autofocus = true;
  inputArea.appendChild(input);

  input.focus();
}

// Compare input with the correct spelling
function checkSpelling() {
  const userInput = document.getElementById("spellingInput");
  if (!userInput) return;

  const attempt = userInput.value.trim();
  const correct = words[currentIndex];

  // Clear any previous red highlight
  userInput.classList.remove("red-border");

  // Case-insensitive comparison
  if (attempt.toLowerCase() === correct.toLowerCase()) {
    // Correct => next word or done
    currentIndex++;
    if (currentIndex >= words.length) {
      // All done
      flashcardCard.textContent = "All Done!";
      inputArea.innerHTML = "<p>Great job!</p>";
      mode = "done";
      nextButton.disabled = true;
    } else {
      mode = "flashcard";
      showFlashcard();
    }
  } else {
    // Incorrect => highlight input, then re-show the flashcard
    userInput.classList.add("red-border");
    mode = "flashcard";
    showFlashcard(); 
    // The user sees the correct word again, and must press Next to return to input mode.
  }
}

// Restart from the first word
function onReset() {
  currentIndex = 0;
  mode = "flashcard";
  nextButton.disabled = false;
  showFlashcard();
}
</script>

</body>
</html>
